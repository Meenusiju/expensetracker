{"ast":null,"code":"import Kapsule from 'kapsule';\nimport { range } from 'd3-array';\nimport { scaleLinear } from 'd3-scale';\nimport { select } from 'd3-selection';\nvar moveToFront = Kapsule({\n  init: function init(el) {\n    el.parentNode.appendChild(el);\n  }\n});\nvar gradient = Kapsule({\n  props: {\n    id: {},\n    // Use with: .attr('fill', 'url(#<gradId>)');\n    colorScale: {\n      \"default\": scaleLinear().range(['black', 'white'])\n    },\n    angle: {\n      \"default\": 0\n    } // 0 (left-right), 90 (down-up))\n\n  },\n  init: function init(el, state) {\n    state.id = \"areaGradient\".concat(Math.round(Math.random() * 10000));\n    state.gradient = select(el).append('linearGradient');\n  },\n  update: function update(state) {\n    var rad = Math.PI * state.angle / 180;\n    state.gradient.attr('y1', Math.round(100 * Math.max(0, Math.sin(rad))) + '%').attr('y2', Math.round(100 * Math.max(0, -Math.sin(rad))) + '%').attr('x1', Math.round(100 * Math.max(0, -Math.cos(rad))) + '%').attr('x2', Math.round(100 * Math.max(0, Math.cos(rad))) + '%').attr('id', state.id);\n    var stopsScale = scaleLinear().domain([0, 100]).range(state.colorScale.domain());\n    var colorStops = state.gradient.selectAll('stop').data(range(0, 100.01, 20)); // 11 stops is sufficient to cover all noticeable color nuances\n\n    colorStops.exit().remove();\n    colorStops.merge(colorStops.enter().append('stop')).attr('offset', function (d) {\n      return \"\".concat(d, \"%\");\n    }).attr('stop-color', function (d) {\n      return state.colorScale(stopsScale(d));\n    });\n  }\n});\nvar dropshadow = Kapsule({\n  // Use with: .attr('filter', 'url(#<shadowId>)'))\n  props: {\n    id: {\n      \"default\": \"areaGradient\".concat(Math.round(Math.random() * 10000))\n    }\n  },\n  init: function init(el, state) {\n    state.filter = select(el).append('defs').append('filter').attr('height', '130%');\n    state.filter.append('feGaussianBlur').attr('in', 'SourceAlpha').attr('stdDeviation', 3);\n    state.filter.append('feOffset').attr('dx', 2).attr('dy', 2).attr('result', 'offsetblur');\n    var feMerge = state.filter.append('feMerge');\n    feMerge.append('feMergeNode');\n    feMerge.append('feMergeNode').attr('in', 'SourceGraphic');\n  },\n  update: function update(state) {\n    state.filter.attr('id', state.id);\n  }\n});\nvar throbber = Kapsule({\n  props: {\n    x: {\n      \"default\": 0\n    },\n    y: {\n      \"default\": 0\n    },\n    r: {\n      \"default\": 8\n    },\n    color: {\n      \"default\": 'darkblue'\n    },\n    duration: {\n      \"default\": 0.7\n    },\n    angleFull: {\n      \"default\": 120\n    }\n  },\n  init: function init(el, state) {\n    el = select(el);\n    state.path = el.append('path');\n    state.transform = state.path.append('animateTransform').attr('attributeName', 'transform').attr('attributeType', 'XML').attr('type', 'rotate').attr('begin', '0s').attr('fill', 'freeze').attr('repeatCount', 'indefinite');\n  },\n  update: function update(state) {\n    state.path.attr('d', genDonutSlice(state.x, state.y, state.r, state.r / 3, 0, state.angleFull)).attr('fill', state.color);\n    state.transform.attr('from', '0 ' + state.x + ' ' + state.y).attr('to', '360 ' + state.x + ' ' + state.y).attr('dur', state.duration + 's'); //\n\n    function genDonutSlice(cx, cy, r, thickness, startAngle, endAngle) {\n      startAngle = startAngle / 180 * Math.PI;\n      endAngle = endAngle / 180 * Math.PI;\n      var outerR = r;\n      var innerR = r - thickness;\n      var p = [[cx + outerR * Math.cos(startAngle), cy + outerR * Math.sin(startAngle)], [cx + outerR * Math.cos(endAngle), cy + outerR * Math.sin(endAngle)], [cx + innerR * Math.cos(endAngle), cy + innerR * Math.sin(endAngle)], [cx + innerR * Math.cos(startAngle), cy + innerR * Math.sin(startAngle)]];\n      var angleDiff = endAngle - startAngle;\n      var largeArc = angleDiff % (Math.PI * 2) > Math.PI ? 1 : 0;\n      var path = [];\n      path.push('M' + p[0].join());\n      path.push('A' + [outerR, outerR, 0, largeArc, 1, p[1]].join());\n      path.push('L' + p[2].join());\n      path.push('A' + [innerR, innerR, 0, largeArc, 0, p[3]].join());\n      path.push('z');\n      return path.join(' ');\n    }\n  }\n});\nvar image = Kapsule({\n  props: {\n    imgUrl: {},\n    x: {\n      \"default\": 0\n    },\n    y: {\n      \"default\": 0\n    },\n    maxWidth: {\n      \"default\": 20\n    },\n    maxHeight: {\n      \"default\": 20\n    },\n    svgAlign: {\n      \"default\": 'xMidYMid'\n    }\n  },\n  methods: {\n    show: function show(state) {\n      state.img.attr('width', state.maxWidth).attr('height', state.maxHeight);\n      return this;\n    },\n    hide: function hide(state) {\n      state.img.attr('width', 0).attr('height', 0);\n      return this;\n    }\n  },\n  init: function init(el, state) {\n    state.img = select(el).append('image');\n  },\n  update: function update(state) {\n    state.img.attr('xlink:href', state.imgUrl).attr('x', state.x).attr('y', state.y).attr('width', state.maxW).attr('height', state.maxH).attr('preserveAspectRatio', state.svgAlign + ' meet');\n  }\n});\nvar zoomOverviewArea = Kapsule({\n  props: {\n    selection: {\n      \"default\": {\n        x: [null, null],\n        // [start, end]\n        y: [null, null] // [start, end]\n\n      }\n    },\n    xDomain: {\n      onChange: function onChange(xDomain, state) {\n        state.xScale.domain(xDomain);\n      }\n    },\n    yDomain: {\n      onChange: function onChange(yDomain, state) {\n        state.yScale.domain(yDomain);\n      }\n    },\n    transitionDuration: 700\n  },\n  stateInit: {\n    xScale: scaleLinear(),\n    yScale: scaleLinear()\n  },\n  init: function init(el, state, _ref) {\n    var width = _ref.width,\n        height = _ref.height,\n        _ref$margin = _ref.margin,\n        margin = _ref$margin === void 0 ? {\n      top: 2,\n      right: 2,\n      bottom: 2,\n      left: 2\n    } : _ref$margin;\n    state.xScale.range([margin.left, width - state.margin.right]);\n    state.yScale.range([margin.top, height - state.margin.bottom]); // Build dom\n\n    state.svg = select(el).append('svg').attr('width', width).attr('height', height);\n    state.outerBox = state.svg.append('rect').attr('x', state.xScale.range()[0]).attr('y', state.yScale.range()[0]).attr('rx', 2).attr('ry', 2).attr('width', state.xScale.range()[1]).attr('height', state.yScale.range()[1]).style('fill', '#EEE').style('stroke', 'grey');\n    state.selectionBox = state.svg.append('rect').attr('rx', 1).attr('ry', 1).attr('width', 0).attr('height', 0).style('stroke', 'blue').style('stroke-opacity', 0.6).style('fill', 'blue').style('fill-opacity', 0.3);\n  },\n  update: function update(state) {\n    state.outerBox.attr('x', state.xScale.range()[0]).attr('y', state.yScale.range()[0]).attr('width', state.xScale.range()[1]).attr('height', state.yScale.range()[1]);\n    state.selectionBox.attr('x', state.xScale(state.selection.x[0])).attr('y', state.yScale(state.selection.y[0])).attr('width', state.xScale(state.selection.x[1] - state.selection.x[0])).attr('height', state.yScale(state.selection.y[1] - state.selection.y[0]));\n  }\n});\nexport { dropshadow, gradient, image, moveToFront, throbber, zoomOverviewArea };","map":{"version":3,"sources":["D:/dataviz/d3-pie-chart/expense-tracker/node_modules/svg-utils/dist/svg-utils.module.js"],"names":["Kapsule","range","scaleLinear","select","moveToFront","init","el","parentNode","appendChild","gradient","props","id","colorScale","angle","state","concat","Math","round","random","append","update","rad","PI","attr","max","sin","cos","stopsScale","domain","colorStops","selectAll","data","exit","remove","merge","enter","d","dropshadow","filter","feMerge","throbber","x","y","r","color","duration","angleFull","path","transform","genDonutSlice","cx","cy","thickness","startAngle","endAngle","outerR","innerR","p","angleDiff","largeArc","push","join","image","imgUrl","maxWidth","maxHeight","svgAlign","methods","show","img","hide","maxW","maxH","zoomOverviewArea","selection","xDomain","onChange","xScale","yDomain","yScale","transitionDuration","stateInit","_ref","width","height","_ref$margin","margin","top","right","bottom","left","svg","outerBox","style","selectionBox"],"mappings":"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","sourcesContent":["import Kapsule from 'kapsule';\nimport { range } from 'd3-array';\nimport { scaleLinear } from 'd3-scale';\nimport { select } from 'd3-selection';\n\nvar moveToFront = Kapsule({\n  init: function init(el) {\n    el.parentNode.appendChild(el);\n  }\n});\n\nvar gradient = Kapsule({\n  props: {\n    id: {},\n    // Use with: .attr('fill', 'url(#<gradId>)');\n    colorScale: {\n      \"default\": scaleLinear().range(['black', 'white'])\n    },\n    angle: {\n      \"default\": 0\n    } // 0 (left-right), 90 (down-up))\n\n  },\n  init: function init(el, state) {\n    state.id = \"areaGradient\".concat(Math.round(Math.random() * 10000));\n    state.gradient = select(el).append('linearGradient');\n  },\n  update: function update(state) {\n    var rad = Math.PI * state.angle / 180;\n    state.gradient.attr('y1', Math.round(100 * Math.max(0, Math.sin(rad))) + '%').attr('y2', Math.round(100 * Math.max(0, -Math.sin(rad))) + '%').attr('x1', Math.round(100 * Math.max(0, -Math.cos(rad))) + '%').attr('x2', Math.round(100 * Math.max(0, Math.cos(rad))) + '%').attr('id', state.id);\n    var stopsScale = scaleLinear().domain([0, 100]).range(state.colorScale.domain());\n    var colorStops = state.gradient.selectAll('stop').data(range(0, 100.01, 20)); // 11 stops is sufficient to cover all noticeable color nuances\n\n    colorStops.exit().remove();\n    colorStops.merge(colorStops.enter().append('stop')).attr('offset', function (d) {\n      return \"\".concat(d, \"%\");\n    }).attr('stop-color', function (d) {\n      return state.colorScale(stopsScale(d));\n    });\n  }\n});\n\nvar dropshadow = Kapsule({\n  // Use with: .attr('filter', 'url(#<shadowId>)'))\n  props: {\n    id: {\n      \"default\": \"areaGradient\".concat(Math.round(Math.random() * 10000))\n    }\n  },\n  init: function init(el, state) {\n    state.filter = select(el).append('defs').append('filter').attr('height', '130%');\n    state.filter.append('feGaussianBlur').attr('in', 'SourceAlpha').attr('stdDeviation', 3);\n    state.filter.append('feOffset').attr('dx', 2).attr('dy', 2).attr('result', 'offsetblur');\n    var feMerge = state.filter.append('feMerge');\n    feMerge.append('feMergeNode');\n    feMerge.append('feMergeNode').attr('in', 'SourceGraphic');\n  },\n  update: function update(state) {\n    state.filter.attr('id', state.id);\n  }\n});\n\nvar throbber = Kapsule({\n  props: {\n    x: {\n      \"default\": 0\n    },\n    y: {\n      \"default\": 0\n    },\n    r: {\n      \"default\": 8\n    },\n    color: {\n      \"default\": 'darkblue'\n    },\n    duration: {\n      \"default\": 0.7\n    },\n    angleFull: {\n      \"default\": 120\n    }\n  },\n  init: function init(el, state) {\n    el = select(el);\n    state.path = el.append('path');\n    state.transform = state.path.append('animateTransform').attr('attributeName', 'transform').attr('attributeType', 'XML').attr('type', 'rotate').attr('begin', '0s').attr('fill', 'freeze').attr('repeatCount', 'indefinite');\n  },\n  update: function update(state) {\n    state.path.attr('d', genDonutSlice(state.x, state.y, state.r, state.r / 3, 0, state.angleFull)).attr('fill', state.color);\n    state.transform.attr('from', '0 ' + state.x + ' ' + state.y).attr('to', '360 ' + state.x + ' ' + state.y).attr('dur', state.duration + 's'); //\n\n    function genDonutSlice(cx, cy, r, thickness, startAngle, endAngle) {\n      startAngle = startAngle / 180 * Math.PI;\n      endAngle = endAngle / 180 * Math.PI;\n      var outerR = r;\n      var innerR = r - thickness;\n      var p = [[cx + outerR * Math.cos(startAngle), cy + outerR * Math.sin(startAngle)], [cx + outerR * Math.cos(endAngle), cy + outerR * Math.sin(endAngle)], [cx + innerR * Math.cos(endAngle), cy + innerR * Math.sin(endAngle)], [cx + innerR * Math.cos(startAngle), cy + innerR * Math.sin(startAngle)]];\n      var angleDiff = endAngle - startAngle;\n      var largeArc = angleDiff % (Math.PI * 2) > Math.PI ? 1 : 0;\n      var path = [];\n      path.push('M' + p[0].join());\n      path.push('A' + [outerR, outerR, 0, largeArc, 1, p[1]].join());\n      path.push('L' + p[2].join());\n      path.push('A' + [innerR, innerR, 0, largeArc, 0, p[3]].join());\n      path.push('z');\n      return path.join(' ');\n    }\n  }\n});\n\nvar image = Kapsule({\n  props: {\n    imgUrl: {},\n    x: {\n      \"default\": 0\n    },\n    y: {\n      \"default\": 0\n    },\n    maxWidth: {\n      \"default\": 20\n    },\n    maxHeight: {\n      \"default\": 20\n    },\n    svgAlign: {\n      \"default\": 'xMidYMid'\n    }\n  },\n  methods: {\n    show: function show(state) {\n      state.img.attr('width', state.maxWidth).attr('height', state.maxHeight);\n      return this;\n    },\n    hide: function hide(state) {\n      state.img.attr('width', 0).attr('height', 0);\n      return this;\n    }\n  },\n  init: function init(el, state) {\n    state.img = select(el).append('image');\n  },\n  update: function update(state) {\n    state.img.attr('xlink:href', state.imgUrl).attr('x', state.x).attr('y', state.y).attr('width', state.maxW).attr('height', state.maxH).attr('preserveAspectRatio', state.svgAlign + ' meet');\n  }\n});\n\nvar zoomOverviewArea = Kapsule({\n  props: {\n    selection: {\n      \"default\": {\n        x: [null, null],\n        // [start, end]\n        y: [null, null] // [start, end]\n\n      }\n    },\n    xDomain: {\n      onChange: function onChange(xDomain, state) {\n        state.xScale.domain(xDomain);\n      }\n    },\n    yDomain: {\n      onChange: function onChange(yDomain, state) {\n        state.yScale.domain(yDomain);\n      }\n    },\n    transitionDuration: 700\n  },\n  stateInit: {\n    xScale: scaleLinear(),\n    yScale: scaleLinear()\n  },\n  init: function init(el, state, _ref) {\n    var width = _ref.width,\n        height = _ref.height,\n        _ref$margin = _ref.margin,\n        margin = _ref$margin === void 0 ? {\n      top: 2,\n      right: 2,\n      bottom: 2,\n      left: 2\n    } : _ref$margin;\n    state.xScale.range([margin.left, width - state.margin.right]);\n    state.yScale.range([margin.top, height - state.margin.bottom]); // Build dom\n\n    state.svg = select(el).append('svg').attr('width', width).attr('height', height);\n    state.outerBox = state.svg.append('rect').attr('x', state.xScale.range()[0]).attr('y', state.yScale.range()[0]).attr('rx', 2).attr('ry', 2).attr('width', state.xScale.range()[1]).attr('height', state.yScale.range()[1]).style('fill', '#EEE').style('stroke', 'grey');\n    state.selectionBox = state.svg.append('rect').attr('rx', 1).attr('ry', 1).attr('width', 0).attr('height', 0).style('stroke', 'blue').style('stroke-opacity', 0.6).style('fill', 'blue').style('fill-opacity', 0.3);\n  },\n  update: function update(state) {\n    state.outerBox.attr('x', state.xScale.range()[0]).attr('y', state.yScale.range()[0]).attr('width', state.xScale.range()[1]).attr('height', state.yScale.range()[1]);\n    state.selectionBox.attr('x', state.xScale(state.selection.x[0])).attr('y', state.yScale(state.selection.y[0])).attr('width', state.xScale(state.selection.x[1] - state.selection.x[0])).attr('height', state.yScale(state.selection.y[1] - state.selection.y[0]));\n  }\n});\n\nexport { dropshadow, gradient, image, moveToFront, throbber, zoomOverviewArea };\n"]},"metadata":{},"sourceType":"module"}